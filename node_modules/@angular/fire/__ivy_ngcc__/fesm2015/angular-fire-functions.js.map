{"version":3,"file":"angular-fire-functions.js","sources":["../../../src/functions/base.ts","../../../src/functions/functions.ts","../../../src/functions/functions.module.ts"],"names":[],"mappings":";;;;;;;;;;;;MAAa,mBAAmB,GAAG;AACnC,IAAE,WAAW,EAAE,IAAI;AACnB,IAAE,oBAAoB,EAAE,IAAI;AAC5B,IAAE,aAAa,EAAE,IAAI;AACrB,CAAC;AACD;AAAC;AAAI;AAAkC;AAAgC;AAAqJ;AAAI;AAAiB,MCYpO,MAAM,GAAG,IAAI,cAAc,CAAS,+BAA+B;AAChF;AAAiB,MAAJ,MAAM,GAAG,IAAI,cAAc,CAAS,+BAA+B;AAChF;AAEW,MAME,oBAAoB;AACjC;AACO;AAA0B;AAA+B;AAAuB;AAEzE;AACU;AAAQ,IAD9B,YAC4B,OAAwB,EACX,YAA2D,EAClG,IAAY,EACgB,MAAqB,EACrB,MAAqB;AAClD;AACmB,cAAZ,UAAU,GAAG,IAAI,sBAAsB,CAAC,IAAI,CAAC;AACvD;AACwB,cAAd,SAAS,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,CAClC,SAAS,CAAC,UAAU,CAAC,cAAc,CAAC,EACpC,SAAS;AAAM;AAAuB;AACzC,QADa,MAAM,OAAO,oBAAoB,CAAC,EAAC,EAC7C,GAAG;AAAM;AAAuB;AAAY,QAAxC,MAAM,mBAAmB,CAAC,OAAO,EAAE,IAAI,EAAE,YAAY,CAAC,EAAC,EAC3D,GAAG;AAAM;AAA0B;AAC/B;AAAY,QADZ,GAAG,IAAI,GAAG,CAAC,SAAS,CAAC,MAAM,IAAI,SAAS,CAAC,EAAC,EAC9C,GAAG;AAAM;AAEf;AAAuB;AAAY,QAFzB,SAAS;AACnB,YAAQ,IAAI,MAAM,EAAE;AACpB,gBAAU,SAAS,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;AACjD,aAAS;AACT,SAAO,EAAC,EACF,WAAW,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAChD;AACL,QACI,IAAI,CAAC,aAAa;AAAQ;AAA0B;AAClC;AAClB;AAAY,QAFS,CAAmB,IAAY;AACnD;AAA2B;AAClB;AAAY,QADpB,CAAC,IAAO,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAC/B,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,EACnC,SAAS;AAAM;AAAgC;AAC9C;AAAY,QADH,SAAS,IAAI,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAC,EAC3D,GAAG;AAAM;AAGhB;AAAuB;AAAY,QAHxB,CAAC,uBAAI,CAAC,CAAC,IAAI,EAAK,EAAC,CACtB,CAAA,CAAA,CAAC;AACR,QACI,OAAO,aAAa,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;AAChD,KACG;AACH;gDAvCC,UAAU,SAAC,kBACV,UAAU,EAAE,KAAK,cAClB,+JACI;AAAC;AAAmB;AAES,4CAG7B,MAAM,SAAC,gBAAgB;AAAS,4CAChC,QAAQ,YAAI,MAAM,SAAC,iBAAiB;AAAS,YAjCL,MAAM;AAAI,4CAmClD,QAAQ,YAAI,MAAM,SAAC,MAAM;AAAS,4CAClC,QAAQ,YAAI,MAAM,SAAC,MAAM;AAAQ;AAAG;;;;;;;;;;;;;;;;;;;;;;;;kCAQE;AAAC;AACzC;AAAqB,IAhBtB,6CAA8F;AAChG;AAoCA,YAAY,CAAC,oBAAoB,EAAE,CAAC,mBAAmB,CAAC,CAAC;AACzD;AAAC;AAAI;AAAkC;AAAuC;AAAqJ;AAAI,MC7D1N,0BAA0B;AAAG;sDAHzC,QAAQ,SAAC,kBACR;CAAS,EAAE,CAAE,oBAAoB,CAAE,cACpC;;;;;;0BACI;AAAC;AAAC;AAAI;AACV;AAAiC;AAAqJ;AAAI;AAAC;AAAI;AAAkC;AAA6C;AAAqJ;AAAI;AAAC;AAA6E","sourcesContent":["export const proxyPolyfillCompat = {\n  useEmulator: null,\n  useFunctionsEmulator: null,\n  httpsCallable: null,\n};\n","import { Inject, Injectable, InjectionToken, NgZone, Optional } from '@angular/core';\nimport { from, Observable, of } from 'rxjs';\nimport { map, observeOn, shareReplay, switchMap, tap } from 'rxjs/operators';\nimport {\n  FIREBASE_APP_NAME,\n  FIREBASE_OPTIONS,\n  FirebaseAppConfig,\n  FirebaseOptions,\n  ɵAngularFireSchedulers,\n  ɵfirebaseAppFactory,\n  ɵlazySDKProxy,\n  ɵPromiseProxy,\n  ɵapplyMixins\n} from '@angular/fire';\nimport firebase from 'firebase/app';\nimport { proxyPolyfillCompat } from './base';\n\nexport const ORIGIN = new InjectionToken<string>('angularfire2.functions.origin');\nexport const REGION = new InjectionToken<string>('angularfire2.functions.region');\n\n// override httpsCallable for compatibility with 5.x\nexport interface AngularFireFunctions extends Omit<ɵPromiseProxy<firebase.functions.Functions>, 'httpsCallable'> {\n}\n\n@Injectable({\n  providedIn: 'any'\n})\nexport class AngularFireFunctions {\n\n  public readonly httpsCallable: <T = any, R = any>(name: string) => (data: T) => Observable<R>;\n\n  constructor(\n    @Inject(FIREBASE_OPTIONS) options: FirebaseOptions,\n    @Optional() @Inject(FIREBASE_APP_NAME) nameOrConfig: string | FirebaseAppConfig | null | undefined,\n    zone: NgZone,\n    @Optional() @Inject(REGION) region: string | null,\n    @Optional() @Inject(ORIGIN) origin: string | null\n  ) {\n    const schedulers = new ɵAngularFireSchedulers(zone);\n\n    const functions = of(undefined).pipe(\n      observeOn(schedulers.outsideAngular),\n      switchMap(() => import('firebase/functions')),\n      map(() => ɵfirebaseAppFactory(options, zone, nameOrConfig)),\n      map(app => app.functions(region || undefined)),\n      tap(functions => {\n        if (origin) {\n          functions.useFunctionsEmulator(origin);\n        }\n      }),\n      shareReplay({ bufferSize: 1, refCount: false })\n    );\n\n    this.httpsCallable = <T = any, R = any>(name: string) =>\n      (data: T) => from(functions).pipe(\n        observeOn(schedulers.insideAngular),\n        switchMap(functions => functions.httpsCallable(name)(data)),\n        map(r => r.data as R)\n      );\n\n    return ɵlazySDKProxy(this, functions, zone);\n\n  }\n\n}\n\nɵapplyMixins(AngularFireFunctions, [proxyPolyfillCompat]);\n","import { NgModule } from '@angular/core';\nimport { AngularFireFunctions } from './functions';\n\n@NgModule({\n  providers: [ AngularFireFunctions ]\n})\nexport class AngularFireFunctionsModule { }\n"]}